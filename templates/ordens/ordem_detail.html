{% extends 'base/base.html' %}
{% block title %}Detalhes da Ordem - FUNETEC{% endblock %}
{% block page_title %}Ordem de Serviço #{{ ordem.cod_ordem }}{% endblock %}

{% block content %}
<div class="card shadow-sm">
    <div class="card-header">
        <h4 class="mb-0">{{ ordem.descricao|truncatechars:50 }}</h4>
    </div>
    <div class="card-body">
        <p><strong>Requisição:</strong> <a href="{% url 'projetos:requisicao_detail' ordem.cod_requisicao.pk %}">#{{ ordem.cod_requisicao.cod_requisicao }}</a></p>
        <p><strong>Situação:</strong> {{ ordem.get_situacao_display }}</p>
        <p><strong>Valor:</strong> R$ {{ ordem.valor|floatformat:2 }}</p>
        <p><strong>Data Limite:</strong> {{ ordem.data_limite|date:"d/m/Y" }}</p>
        
        <hr>
        <h5 class="mt-4">Contrato</h5>
        {% if not ordem.contrato %}
            <p class="text-muted">Esta ordem de serviço ainda não possui um contrato.</p>
            <a href="{% url 'contratos:contrato_create' ordem.pk %}" class="btn btn-success">
                <i class="fas fa-file-signature me-1"></i> Criar Contrato
            </a>
        {% else %}
            <a href="{% url 'contratos:contrato_detail' ordem.contrato.pk %}" class="btn btn-info">
                <i class="fas fa-eye me-1"></i> Ver Contrato Associado
            </a>
        {% endif %}
    </div>
</div>
{% endblock %}