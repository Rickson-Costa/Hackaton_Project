{% extends 'base/base.html' %}

{% block title %}Central de Relatórios - FUNETEC{% endblock %}
{% block page_title %}Central de Relatórios{% endblock %}

{% block content %}
<!-- Resumo Estatístico -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card text-center bg-primary text-white">
            <div class="card-body">
                <i class="fas fa-project-diagram fa-2x mb-2"></i>
                <h5>Total de Projetos</h5>
                <h3>{{ total_projetos }}</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center bg-success text-white">
            <div class="card-body">
                <i class="fas fa-file-contract fa-2x mb-2"></i>
                <h5>Total de Contratos</h5>
                <h3>{{ total_contratos }}</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center bg-info text-white">
            <div class="card-body">
                <i class="fas fa-money-bill-wave fa-2x mb-2"></i>
                <h5>Total de Pagamentos</h5>
                <h3>{{ total_pagamentos }}</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center bg-warning text-white">
            <div class="card-body">
                <i class="fas fa-dollar-sign fa-2x mb-2"></i>
                <h5>Valor Recebido</h5>
                <h3>R$ {{ valor_total_recebido|floatformat:0 }}</h3>
            </div>
        </div>
    </div>
</div>

<!-- Relatórios Disponíveis -->
<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-project-diagram me-2 text-primary"></i> Relatório de Projetos</h5>
                <p class="card-text">Lista completa de todos os projetos cadastrados no sistema, incluindo valores, situação e prazos.</p>
                
                <div class="d-grid gap-2">
                    <a href="{% url 'relatorios:relatorio_projetos' %}" class="btn btn-outline-primary">
                        <i class="fas fa-eye me-1"></i> Visualizar
                    </a>
                    <div class="btn-group">
                        <a href="{% url 'relatorios:relatorio_projetos_generate' %}?format=pdf" class="btn btn-danger">
                            <i class="fas fa-file-pdf me-1"></i> PDF
                        </a>
                        <a href="{% url 'relatorios:relatorio_projetos_generate' %}?format=excel" class="btn btn-success">
                            <i class="fas fa-file-excel me-1"></i> Excel
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-file-contract me-2 text-success"></i> Relatório de Contratos</h5>
                <p class="card-text">Relatório detalhado de contratos, prestadores, valores e status de execução dos serviços.</p>
                
                <div class="d-grid gap-2">
                    <a href="{% url 'relatorios:relatorio_contratos' %}" class="btn btn-outline-success">
                        <i class="fas fa-eye me-1"></i> Visualizar
                    </a>
                    <div class="btn-group">
                        <a href="{% url 'relatorios:relatorio_contratos_generate' %}?format=pdf" class="btn btn-danger">
                            <i class="fas fa-file-pdf me-1"></i> PDF
                        </a>
                        <a href="{% url 'relatorios:relatorio_contratos_generate' %}?format=excel" class="btn btn-success">
                            <i class="fas fa-file-excel me-1"></i> Excel
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-chart-line me-2 text-info"></i> Relatório Financeiro</h5>
                <p class="card-text">Análise financeira completa: fluxo de caixa, inadimplência, valores recebidos e pagamentos.</p>
                
                <div class="d-grid gap-2">
                    <a href="{% url 'relatorios:relatorio_financeiro' %}" class="btn btn-outline-info">
                        <i class="fas fa-eye me-1"></i> Visualizar
                    </a>
                    <div class="btn-group">
                        <a href="{% url 'relatorios:relatorio_financeiro_generate' %}?format=pdf" class="btn btn-danger">
                            <i class="fas fa-file-pdf me-1"></i> PDF
                        </a>
                        <a href="{% url 'relatorios:relatorio_financeiro_generate' %}?format=excel" class="btn btn-success">
                            <i class="fas fa-file-excel me-1"></i> Excel
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card shadow-sm h-100 border-warning">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-cogs me-2 text-warning"></i> Relatórios Customizados</h5>
                <p class="card-text">Crie relatórios personalizados com filtros avançados para projetos, contratos e dados financeiros.</p>
                
                <div class="d-grid gap-2">
                    <a href="{% url 'relatorios:relatorio_custom' %}" class="btn btn-outline-warning">
                        <i class="fas fa-filter me-1"></i> Configurar Filtros
                    </a>
                    <div class="text-center">
                        <small class="text-muted">
                            <i class="fas fa-magic me-1"></i> Filtros por data, valor, tipo e muito mais!
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Links Rápidos -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-link me-2"></i>Acesso Rápido</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <a href="{% url 'dashboard:analytics_financeiro' %}" class="btn btn-outline-primary w-100">
                            <i class="fas fa-chart-bar me-1"></i> Analytics Financeiro
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'pagamentos:payment_history' %}" class="btn btn-outline-success w-100">
                            <i class="fas fa-history me-1"></i> Histórico de Pagamentos
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'contratos:parcela_list' %}" class="btn btn-outline-info w-100">
                            <i class="fas fa-list me-1"></i> Lista de Parcelas
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="{% url 'projetos:projeto_list' %}" class="btn btn-outline-warning w-100">
                            <i class="fas fa-project-diagram me-1"></i> Lista de Projetos
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}