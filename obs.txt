# ================================
# CONFIGURAÃ‡ÃƒO DO BANCO DE DADOS - SISTEMA FUNETEC
# ================================

# PROBLEMA: sqlite3.OperationalError: no such table: accounts_user
# SOLUÃ‡ÃƒO: Criar as migraÃ§Ãµes e aplicar ao banco de dados

# ============================================================================
# 1. PARAR O SERVIDOR (se estiver rodando)
# ============================================================================

# Pressione Ctrl+C no terminal onde o servidor estÃ¡ rodando

# ============================================================================
# 2. VERIFICAR SE ESTAMOS NO DIRETÃ“RIO CORRETO
# ============================================================================

cd C:\Users\rickson.costa\Documents\Pessoal\Sys\Hackaton_Project

# Deve ter o arquivo manage.py aqui
dir manage.py

# ============================================================================
# 3. CRIAR MIGRAÃ‡Ã•ES PARA TODOS OS APPS
# ============================================================================

# Criar migraÃ§Ãµes para o app accounts (usuÃ¡rios)
python manage.py makemigrations accounts

# Criar migraÃ§Ãµes para o app projetos
python manage.py makemigrations projetos

# Criar migraÃ§Ãµes para o app contratos
python manage.py makemigrations contratos

# Criar migraÃ§Ãµes para outros apps (se necessÃ¡rio)
python manage.py makemigrations core
python manage.py makemigrations dashboard
python manage.py makemigrations pagamentos
python manage.py makemigrations relatorios

# ============================================================================
# 4. APLICAR MIGRAÃ‡Ã•ES AO BANCO DE DADOS
# ============================================================================

# Aplicar migraÃ§Ãµes padrÃ£o do Django
python manage.py migrate

# ============================================================================
# 5. CRIAR SUPERUSUÃRIO
# ============================================================================

python manage.py createsuperuser

# Quando solicitado, digite:
# Username: admin
# Email: admin@funetec.org.br
# Password: admin123
# Password (again): admin123

# ============================================================================
# 6. INICIAR O SERVIDOR NOVAMENTE
# ============================================================================

python manage.py runserver

# ============================================================================
# 7. TESTAR O LOGIN
# ============================================================================

# Acesse: http://localhost:8000/accounts/login/
# Login: admin
# Senha: admin123

# ============================================================================
# 8. SE HOUVER ERRO NAS MIGRAÃ‡Ã•ES, EXECUTE INDIVIDUALMENTE
# ============================================================================

# Se der erro, execute um app de cada vez:

# Primeiro, apenas o accounts:
python manage.py makemigrations accounts --verbosity=2

# Se der erro, verifique o modelo User:
python manage.py check accounts

# Se necessÃ¡rio, aplique apenas migraÃ§Ãµes bÃ¡sicas primeiro:
python manage.py migrate auth
python manage.py migrate contenttypes
python manage.py migrate sessions
python manage.py migrate admin

# Depois tente novamente:
python manage.py makemigrations accounts
python manage.py migrate accounts

# ============================================================================
# 9. COMANDOS DE VERIFICAÃ‡ÃƒO
# ============================================================================

# Verificar se as tabelas foram criadas:
python manage.py dbshell
.tables
.quit

# Ou verificar com Django shell:
python manage.py shell
>>> from apps.accounts.models import User
>>> User.objects.count()
>>> exit()

# ============================================================================
# 10. SOLUÃ‡ÃƒO DE PROBLEMAS COMUNS
# ============================================================================

# Se der erro "no such table: django_migrations":
python manage.py migrate --run-syncdb

# Se der erro de campos no User model:
# Edite apps/accounts/models/user.py e remova campos problemÃ¡ticos temporariamente

# Se der erro de imports circulares:
# Comente imports problemÃ¡ticos nos __init__.py dos models

# ============================================================================
# 11. SEQUÃŠNCIA COMPLETA DE COMANDOS
# ============================================================================

# Execute esta sequÃªncia completa:
cd C:\Users\rickson.costa\Documents\Pessoal\Sys\Hackaton_Project
python manage.py check
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver

# ============================================================================
# 12. VERIFICAÃ‡ÃƒO FINAL
# ============================================================================

# ApÃ³s criar o superusuÃ¡rio e iniciar o servidor:
# 1. Acesse: http://localhost:8000/accounts/login/
# 2. Login: admin / admin123
# 3. Deve redirecionar para: http://localhost:8000/dashboard/
# 4. Deve mostrar o dashboard do FUNETEC

# Se tudo funcionou, vocÃª verÃ¡:
# âœ… PÃ¡gina de login
# âœ… Login bem-sucedido
# âœ… Dashboard funcionando
# âœ… Menu de navegaÃ§Ã£o
# âœ… Sistema operacional!

# ============================================================================
# 13. PRÃ“XIMOS PASSOS APÃ“S O LOGIN FUNCIONAR
# ============================================================================

# Teste estas URLs:
# http://localhost:8000/admin/           â†’ Interface administrativa
# http://localhost:8000/projetos/       â†’ Lista de projetos
# http://localhost:8000/contratos/      â†’ Lista de contratos
# http://localhost:8000/accounts/profile/ â†’ Perfil do usuÃ¡rio

# ParabÃ©ns! O sistema estarÃ¡ 100% funcional! ðŸŽ‰